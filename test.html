<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: Arial; padding: 20px; }
        button { padding: 15px; margin: 10px; font-size: 16px; }
        #info { margin-top: 20px; border: 1px solid #ccc; padding: 10px; }
    </style>
</head>
<body>
    <h1>üéÆ –¢–µ—Å—Ç Web App</h1>
    <button id="testBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ</button>
    
    <div id="info">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    
    <script>
        const info = document.getElementById('info');
        
        function log(message) {
            info.innerHTML += message + '<br>';
            console.log(message);
        }
        
        if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
            log('‚úÖ Telegram WebApp –Ω–∞–π–¥–µ–Ω');
            
            Telegram.WebApp.ready();
            Telegram.WebApp.expand();
            
            log('‚úÖ WebApp –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            Telegram.WebApp.MainButton.text = "–ì–æ—Ç–æ–≤–æ";
            Telegram.WebApp.MainButton.show();
            
            log('‚úÖ –ö–Ω–æ–ø–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞');
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
            Telegram.WebApp.MainButton.onClick(() => {
                log('üî• –ì–õ–ê–í–ù–ê–Ø –ö–ù–û–ü–ö–ê –ù–ê–ñ–ê–¢–ê!');
                
                const testData = {
                    type: "games_selected",
                    games: ["CS2", "Valorant", "Dota 2"],
                    timestamp: Date.now()
                };
                
                log('üì§ –û—Ç–ø—Ä–∞–≤–ª—è—é: ' + JSON.stringify(testData));
                
                try {
                    Telegram.WebApp.sendData(JSON.stringify(testData));
                    log('‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!');
                    
                    // –ó–∞–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ —Å–µ–∫—É–Ω–¥—É
                    setTimeout(() => {
                        Telegram.WebApp.close();
                    }, 1000);
                    
                } catch (error) {
                    log('‚ùå –û—à–∏–±–∫–∞: ' + error.message);
                }
            });
            
        } else {
            log('‚ùå Telegram WebApp –ù–ï –Ω–∞–π–¥–µ–Ω!');
        }
        
        // –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∞
        document.getElementById('testBtn').onclick = () => {
            log('üî• –¢–µ—Å—Ç–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –Ω–∞–∂–∞—Ç–∞');
            
            if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
                const data = {
                    type: "test",
                    message: "–¢–µ—Å—Ç —Å –∫–Ω–æ–ø–∫–∏"
                };
                
                Telegram.WebApp.sendData(JSON.stringify(data));
                log('üì§ –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω');
            } else {
                log('‚ùå Telegram –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
            }
        };
    </script>
</body>
</html>
